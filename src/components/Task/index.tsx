import { useState } from 'react'
import style from './style.module.css'

type Props = {
  title: string;
  onDeleteTask: (title: string) => void;
  onCompleteTask: () => void;
  onDescompleteTask: () => void;
}

export function Task({ title, onDeleteTask, onCompleteTask, onDescompleteTask }: Props) {
  const [completeTask, setCompleteTask] = useState(false)

  function handleToogleCompleteTask() {
    setCompleteTask(!completeTask)
    if (!completeTask) {
      onCompleteTask()
    } else {
      onDescompleteTask()
    }
  }

  return (
    <div className={style.container}>
      <div
        onClick={handleToogleCompleteTask}
      >
        {completeTask ?
          <svg className={style.checkbox} width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.98056 16.4262C13.0731 16.4262 16.3908 13.1085 16.3908 9.01596C16.3908 4.92339 13.0731 1.60571 8.98056 1.60571C4.88799 1.60571 1.57031 4.92339 1.57031 9.01596C1.57031 13.1085 4.88799 16.4262 8.98056 16.4262Z" fill="#5E60CE" />
            <path d="M8.96452 1.85959C10.3768 1.85959 11.7573 2.27837 12.9316 3.06298C14.1058 3.84758 15.021 4.96278 15.5615 6.26753C16.1019 7.57229 16.2433 9.008 15.9678 10.3931C15.6923 11.7782 15.0122 13.0506 14.0136 14.0492C13.015 15.0478 11.7427 15.7279 10.3576 16.0034C8.97244 16.2789 7.53673 16.1375 6.23197 15.597C4.92722 15.0566 3.81202 14.1414 3.02742 12.9671C2.24281 11.7929 1.82403 10.4123 1.82403 9.00008C1.83134 7.10855 2.58599 5.29659 3.92351 3.95907C5.26103 2.62155 7.073 1.8669 8.96452 1.85959V1.85959ZM8.96452 0.272809C7.23997 0.279864 5.55616 0.7977 4.12568 1.76094C2.69519 2.72419 1.58215 4.08965 0.927075 5.68496C0.272 7.28027 0.104256 9.0339 0.445021 10.7245C0.785786 12.415 1.61978 13.9667 2.84172 15.1837C4.06366 16.4007 5.61876 17.2283 7.31071 17.5622C9.00265 17.896 10.7556 17.7211 12.3482 17.0596C13.9408 16.398 15.3017 15.2794 16.2591 13.845C17.2165 12.4106 17.7275 10.7246 17.7275 9.00008C17.7275 7.85099 17.5006 6.71321 17.0598 5.65203C16.619 4.59086 15.9729 3.62718 15.1587 2.81631C14.3445 2.00544 13.3782 1.36334 12.3153 0.926857C11.2523 0.490376 10.1136 0.268108 8.96452 0.272809V0.272809Z" fill="#5E60CE" />
            <path d="M12.4311 6.34215L8.09914 10.6741L5.61667 8.19162L4.78076 9.02753L8.09914 12.3459L13.267 7.17806L12.4311 6.34215Z" fill="#F2F2F2" />
          </svg>
          :
          <svg className={style.checkbox} width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.96452 1.85955C10.3768 1.85955 11.7573 2.27834 12.9316 3.06294C14.1058 3.84755 15.021 4.96275 15.5615 6.2675C16.1019 7.57225 16.2433 9.00797 15.9678 10.3931C15.6923 11.7782 15.0122 13.0505 14.0136 14.0491C13.015 15.0478 11.7427 15.7278 10.3576 16.0033C8.97244 16.2789 7.53673 16.1375 6.23197 15.597C4.92722 15.0566 3.81202 14.1413 3.02742 12.9671C2.24281 11.7928 1.82403 10.4123 1.82403 9.00005C1.83134 7.10852 2.58599 5.29656 3.92351 3.95904C5.26103 2.62152 7.073 1.86687 8.96452 1.85955ZM8.96452 0.272778C7.23997 0.279833 5.55616 0.797669 4.12568 1.76091C2.69519 2.72416 1.58215 4.08962 0.927075 5.68493C0.272 7.28024 0.104256 9.03387 0.445021 10.7244C0.785786 12.415 1.61978 13.9667 2.84172 15.1837C4.06366 16.4006 5.61876 17.2283 7.31071 17.5621C9.00265 17.896 10.7556 17.7211 12.3482 17.0595C13.9408 16.3979 15.3017 15.2793 16.2591 13.8449C17.2165 12.4105 17.7275 10.7246 17.7275 9.00005C17.7275 7.85096 17.5006 6.71318 17.0598 5.652C16.619 4.59083 15.9729 3.62715 15.1587 2.81628C14.3445 2.00541 13.3782 1.36331 12.3153 0.926827C11.2523 0.490346 10.1136 0.268077 8.96452 0.272778Z" fill="#4EA8DE" />
          </svg>
        }
      </div>

      <p
        className={completeTask ? style.text : ''}
      >{title}</p>

      <button
        onClick={() => onDeleteTask(title)}
      >
        <svg className={style.deleteButton} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.2021 9.98547H12.8716V15.5073H14.2021V9.98547Z" fill="#808080" />
          <path d="M11.4624 9.98547H10.1318V15.5073H11.4624V9.98547Z" fill="#808080" />
          <path d="M18.478 7.16712C18.4754 7.03061 18.4295 6.89846 18.3469 6.78975C18.2642 6.68104 18.1492 6.6014 18.0184 6.56232C17.9596 6.53782 17.8974 6.52252 17.8339 6.51696H14.2868C14.1525 6.07791 13.8808 5.69355 13.5117 5.42047C13.1426 5.14739 12.6956 5 12.2365 5C11.7774 5 11.3304 5.14739 10.9613 5.42047C10.5922 5.69355 10.3205 6.07791 10.1862 6.51696H6.63911C6.58068 6.51814 6.52269 6.52729 6.46674 6.54418H6.45162C6.31318 6.58701 6.19334 6.67547 6.11163 6.79515C6.02992 6.91483 5.99117 7.05866 6.00169 7.20319C6.01222 7.34771 6.0714 7.48441 6.16958 7.59099C6.26776 7.69757 6.39916 7.76774 6.54234 7.79006L7.25298 17.5334C7.26382 17.9127 7.41693 18.2741 7.68191 18.5458C7.94688 18.8175 8.30435 18.9797 8.68332 19H15.7867C16.1662 18.9804 16.5244 18.8186 16.79 18.5468C17.0556 18.2751 17.2092 17.9132 17.22 17.5334L17.9277 7.79914C18.0802 7.77797 18.22 7.70232 18.3212 7.58615C18.4223 7.46999 18.478 7.32116 18.478 7.16712ZM12.2365 6.21456C12.3661 6.21458 12.4943 6.24146 12.6129 6.29351C12.7316 6.34556 12.8382 6.42164 12.926 6.51696H11.547C11.6346 6.42135 11.7411 6.34507 11.8599 6.29299C11.9786 6.24092 12.1069 6.21421 12.2365 6.21456ZM15.7867 17.7904H8.68332C8.60168 17.7904 8.47467 17.6573 8.45955 17.4457L7.75798 7.81123H16.715L16.0135 17.4457C15.9984 17.6573 15.8714 17.7904 15.7867 17.7904Z" fill="#808080" />
        </svg>
      </button>
    </div>
  )
}